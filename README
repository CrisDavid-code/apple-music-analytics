# üéµ Apple Music ‚Äî Real-Time Analytics (MongoDB + Docker + Node.js)
Examen Final ‚Äî Bases de Datos 2  
UDV ‚Äì Universidad Da Vinci  
Estudiante: Cristian Aguilar  
Fecha: Diciembre 2025  

Este proyecto implementa una **Prueba de Concepto (PoC)** solicitada por Apple Music para demostrar una arquitectura moderna basada en **MongoDB**, capaz de procesar datos en tiempo real y responder preguntas de negocio clave relacionadas con:

- Usuarios  
- Artistas  
- Canciones  
- Streams (reproducciones)  

La soluci√≥n incluye:
- Base de datos en Docker  
- Script de generaci√≥n de datos (seed.js)  
- API REST con Node.js/Express  
- Dashboard dise√±ado en v0.dev  
- 5 consultas cr√≠ticas construidas con Aggregation Pipelines  

---

# üöÄ 1. Arquitectura General

Docker ‚Üí MongoDB ‚Üí Node.js API ‚Üí Dashboard (v0.dev)
### Componentes principales:


| Componente | Tecnolog√≠a |
|-----------|------------|
| Base de datos | MongoDB (Docker) |
| Backend/API | Node.js + Express |
| Generaci√≥n de datos | seed.js |
| Visualizaci√≥n | Dashboard v0.dev |
| Consultas | Aggregation Pipelines |

MongoDB fue elegido por su capacidad de manejar grandes vol√∫menes de datos y realizar b√∫squedas r√°pidas basadas en agregaciones.

---

# 2. Requisitos

- Node.js 18+  
- Docker Desktop  
- Git  
- MongoDB Compass (opcional)  

---

# 3. Instalaci√≥n

Clonar el repositorio:

- git clone https://github.com/TU_USUARIO seeding
- cd seeding

Instalar dependencias:
- npm install

# 4. Levantar MongoDB con Docker

Ejecutar desde la ra√≠z del proyecto:
docker compose up -d

Esto crea:
- Un contenedor con MongoDB
- Usuario root
- Volumen persistente para la base de datos

# 5. Ejecutar el Seed (Generaci√≥n de Datos)

El archivo seed.js genera:
- 50 usuarios
- 5 artistas
- 100 canciones
- 2,000 streams en fechas aleatorias
- 5 usuarios premium sin actividad (Zombies)

Ejecutar:
- node seed.js

Si todo va bien ver√°s:
- Se generaron 5 usuarios premium sin actividad (Zombies)
Seeding completo

# 6. Iniciar el Servidor API
- node api/server.js

El servidor se ejecutar√° en:
- http://localhost:3000

# 7. Endpoints Documentados

A continuaci√≥n se describen los 5 endpoints solicitados en el examen, cada uno separados.

**7.1 Royalties ‚Äî Tiempo total reproducido por artista (√∫ltimos 30 d√≠as)**

- GET /api/royalties

Devuelve:

- Nombre del artista
- Total de segundos reproducidos
- Ordenado de mayor a menor

Captura Carbon:

![Royalties](./capturas/royalties.png)

**7.2 Top 10 Songs ‚Äî Canciones m√°s escuchadas en Guatemala (7 d√≠as)**

- GET /api/top-songs

Devuelve:

- T√≠tulo de la canci√≥n
- Artista
- Cantidad de reproducciones

Captura Carbon:

![TopSongs](./capturas/top10.png)

**7.3 Zombies ‚Äî Usuarios Premium sin actividad (30 d√≠as)**

- GET /api/zombies

Devuelve:

- Usuarios premium
- Sin streams recientes
- Captura Carbon:

![Zombies](./capturas/zombies.png)

**7.4 Demographics ‚Äî Edades de usuarios que escuchan Reggaeton**

- GET /api/demographics

Devuelve:

- Buckets de edades
- Cantidad de oyentes por grupo
- Datos agregados con $bucket

Captura Carbon:

![Demographics](./capturas/demographics.png)

**7.5 Heavy Users ‚Äî Usuarios que m√°s canciones distintas escucharon (Bad Bunny por defecto)**

- GET /api/heavy-users

Opcionalmente:

- GET /api/heavy-users?artist=Karol G

Devuelve:

- Usuario
- Cantidad de canciones distintas escuchadas
- Lista ordenada descendente

Captura Carbon:

![HeavyUsers](./capturas/heavy.png)

# 8. Dashboard (v0.dev)

Se construy√≥ un dashboard con las siguientes secciones:

- Gr√°fica de Royalties
- Top 10 Songs (tabla)
- Tarjeta de usuarios Zombies
- Demograf√≠a de usuarios por edad
- Heavy Users (Leaderboard interactivo)

**Dashboard:**

- Link: https://v0.app/chat/apple-music-dashboard-gAPIFDHz6BJ?ref=MAJGRO

# 9. Cr√©ditos

Proyecto desarrollado como examen final para Bases de Datos 2 ‚Äì Universidad Da Vinci, utilizando:

- MongoDB
- Node.js
- Express
- Docker
- v0.dev

Cristian David Aguilar
Carn√©: 202301199